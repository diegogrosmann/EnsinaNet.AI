{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <h2 class="mb-4 text-center">Parâmetros de Treinamento para o Token "{{ token.name }}"</h2>

        <div class="card p-3">
            <form method="post">
                {% csrf_token %}
                <ul class="nav nav-tabs" id="trainingTabs" role="tablist">
                    {% for ai_form in forms %}
                        <li class="nav-item" role="presentation">
                            <button class="nav-link {% if forloop.first %}active{% endif %}"
                                    id="{{ ai_form.ai_client }}-tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#{{ ai_form.ai_client }}"
                                    type="button"
                                    role="tab"
                                    aria-controls="{{ ai_form.ai_client }}"
                                    aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
                                {{ ai_form.ai_client }}
                            </button>
                        </li>
                    {% endfor %}
                </ul>
                <div class="tab-content mt-3" id="trainingTabsContent">
                    {% for ai_form in forms %}
                        <div class="tab-pane fade {% if forloop.first %}show active{% endif %}"
                             id="{{ ai_form.ai_client }}"
                             role="tabpanel"
                             aria-labelledby="{{ ai_form.ai_client }}-tab">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h4>{{ ai_form.ai_client }}</h4>
                                    <div class="mb-3">
                                        {{ ai_form.form.training_parameters.label_tag }}
                                        {{ ai_form.form.training_parameters }}
                                        {% for error in ai_form.form.training_parameters.errors %}
                                            <small class="text-danger">{{ error }}</small>
                                        {% endfor %}
                                    </div>
                                    <div class="mb-3">
                                        {{ ai_form.form.trained_model_name.label_tag }}
                                        {{ ai_form.form.trained_model_name }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save"></i> Salvar Parâmetros de Treinamento
                </button>
            </form>
        </div>

        <a href="{% url 'manage_configurations' token.id %}" class="btn btn-secondary mt-3">
            <i class="bi bi-arrow-left"></i> Voltar para Configurações do Token
        </a>
    </div>
</div>
{% endblock %}

<!-- ai_config/templates/ai_config/train_ai.html -->

{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <h2>Treinar IA para o Token "{{ token.name }}"</h2>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Iniciar Treinamento</button>
            <a href="{% url 'manage_configurations' token.id %}" class="btn btn-secondary">Cancelar</a>
        </form>
        
        {% if ai_clients_trainable_details %}
            <hr>
            <h4>Modelos Treinados</h4>
            {% for ai_client in ai_clients_trainable_details %}
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">{{ ai_client.name }}</h5>
                        {% if ai_client.trained_model_name %}
                            <p class="card-text">
                                <strong>Modelo Treinado:</strong> {{ ai_client.trained_model_name }}
                            </p>
                            <form method="post" action="{% url 'ai_config:remove_trained_model' token.id ai_client.name %}" onsubmit="return confirm('Tem certeza de que deseja remover o modelo treinado para {{ ai_client.name }}?');">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger">Remover Modelo Treinado</button>
                            </form>
                        {% else %}
                            <p class="card-text text-muted">Nenhum modelo treinado.</p>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% endif %}
        
        {% if ai_clients_not_trainable %}
            <h4>IAs que não podem ser treinadas:</h4>
            <ul>
                {% for ai_client_name in ai_clients_not_trainable %}
                    <li>{{ ai_client_name }}</li>
                {% endfor %}
            </ul>
            <p>Estas IAs não suportam o treinamento. Por favor, inclua o arquivo de treinamento no prompt.</p>
        {% endif %}
    </div>
</div>
{% endblock %}

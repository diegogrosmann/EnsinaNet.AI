/*
 * Estilos específicos para o componente MarkdownX
 * Este arquivo contém apenas os estilos necessários para o editor markdown
 */

/* ======== COMPONENTE MARKDOWNX ======== */
/* Estilos essenciais para o editor markdown */
.markdownx {
    display: flex;
    gap: 0.5rem;
    position: relative;
    margin-bottom: 1rem;
}

.markdownx-editor,
.markdownx-preview {
    flex: 1;
    min-height: 150px;
    overflow-y: auto;
}

.markdownx-editor {
    font-family: var(--bs-font-monospace);
    padding: 0.75rem;
    border: var(--bs-border-width) solid var(--bs-border-color);
    border-radius: var(--bs-border-radius);
}

.markdownx-preview {
    background-color: var(--bs-tertiary-bg);
    padding: 0.75rem;
    border: var(--bs-border-width) solid var(--bs-border-color);
    border-radius: var(--bs-border-radius);
    /* Reset importante para evitar que o Bootswatch afete o conteúdo */
    font-family: system-ui, -apple-system, sans-serif !important;
    font-size: 1rem !important;
    line-height: 1.5 !important;
    color: #333 !important;
}

/* Resets explícitos para elementos dentro do preview */
.markdownx-preview * {
    font-family: inherit !important;
    line-height: inherit !important;
    color: inherit !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
}

/* Estilos para neutralizar formatação Bootswatch dentro do preview */
.markdownx-preview h1, 
.markdownx-preview h2, 
.markdownx-preview h3, 
.markdownx-preview h4, 
.markdownx-preview h5, 
.markdownx-preview h6 {
    font-family: system-ui, -apple-system, sans-serif !important;
    font-weight: bold !important;
    color: #333 !important;
    margin-top: 1em !important;
    margin-bottom: 0.5em !important;
    padding: 0 !important;
    border: none !important;
    background: none !important;
    box-shadow: none !important;
}

.markdownx-preview h1 { font-size: 2em !important; }
.markdownx-preview h2 { font-size: 1.75em !important; }
.markdownx-preview h3 { font-size: 1.5em !important; }
.markdownx-preview h4 { font-size: 1.25em !important; }
.markdownx-preview h5 { font-size: 1em !important; }
.markdownx-preview h6 { font-size: 0.85em !important; }

.markdownx-preview p {
    margin-top: 0.75em !important;
    margin-bottom: 0.75em !important;
    padding: 0 !important;
}

.markdownx-preview pre, 
.markdownx-preview code {
    font-family: monospace !important;
    background-color: #f5f5f5 !important;
    padding: 0.2em 0.4em !important;
    border-radius: 3px !important;
    color: #333 !important;
    border: 1px solid #ddd !important;
}

.markdownx-preview pre {
    padding: 0.5em !important;
    margin: 0.5em 0 !important;
    overflow-x: auto !important;
}

.markdownx-preview pre code {
    background-color: transparent !important;
    padding: 0 !important;
    border: none !important;
}

.markdownx-preview a {
    color: #0066cc !important;
    text-decoration: underline !important;
    background: none !important;
    padding: 0 !important;
}

.markdownx-preview a:hover {
    color: #004080 !important;
}

.markdownx-preview ul, 
.markdownx-preview ol {
    margin-top: 0.5em !important;
    margin-bottom: 0.5em !important;
    padding-left: 2em !important;
}

.markdownx-preview ul li, 
.markdownx-preview ol li {
    margin: 0.25em 0 !important;
}

.markdownx-preview blockquote {
    margin: 0.5em 0 0.5em 0.5em !important;
    padding-left: 1em !important;
    border-left: 4px solid #ddd !important;
    color: #555 !important;
}

.markdownx-preview table {
    border-collapse: collapse !important;
    width: 100% !important;
    margin: 1em 0 !important;
}

.markdownx-preview table th,
.markdownx-preview table td {
    border: 1px solid #ddd !important;
    padding: 0.5em !important;
    text-align: left !important;
}

.markdownx-preview hr {
    border: none !important;
    border-top: 1px solid #ddd !important;
    margin: 1em 0 !important;
}

/* Resizer para o editor markdown */
.markdownx-resizer {
    position: absolute;
    bottom: -4px;
    left: 0;
    right: 0;
    height: 8px;
    background-color: var(--bs-border-color);
    cursor: ns-resize;
    border-radius: 0 0 var(--bs-border-radius) var(--bs-border-radius);
    opacity: 0.7;
    transition: opacity 0.2s, background-color 0.2s;
}

.markdownx-resizer:hover {
    opacity: 1;
    background-color: var(--bs-primary);
}

/* Classe específica para neutralizar estilos de temas no preview */
.markdown-neutral-style {
    /* Resetar todos os estilos potencialmente herdados do tema */
    font-family: system-ui, -apple-system, sans-serif !important;
    font-size: 1rem !important;
    line-height: 1.5 !important;
    color: #333 !important;
    background-color: var(--bs-tertiary-bg) !important;
    padding: 0.75rem !important;
}

/* Estilo para botão com mudanças não salvas */
.btn-unsaved .unsaved-indicator {
    display: inline-block;
    color: var(--bs-danger);
    animation: pulse 1.5s infinite;
    font-weight: bold;
}

@keyframes pulse {
    0% { opacity: 0.5; }
    50% { opacity: 1; }
    100% { opacity: 0.5; }
}

@media (max-width: 768px) {
    .markdownx {
        flex-direction: column;
    }
    
    .markdownx-editor,
    .markdownx-preview {
        width: 100%;
    }
}
